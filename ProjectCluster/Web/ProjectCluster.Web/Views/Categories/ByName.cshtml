@model ProjectCluster.Web.ViewModels.Categories.CategoryViewModel
@{
    this.ViewData["Title"] = Model.Name;
}

<section id="subintro">
    <div class="container">
        <div class="row">
            <div class="span4">
                <h3><strong>@Model.Name</strong></h3>
            </div>
            <div class="span8">
                <ul class="breadcrumb notop">
                    <li><a asp-area="" asp-controller="Home" asp-action="Index">Home</a><span class="divider">/</span></li>
                    <li class="active">@Model.Name</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="maincontent">
    <div class="container">
        <div class="row">
            <div class="span4">
                <aside>
                    <div class="widget">
                        <h4>Search</h4>
                        <form class="form-search">
                            <input placeholder="Type something" type="text" class="input-medium search-query">
                            <button type="submit" class="btn btn-flat btn-color">Search</button>
                        </form>
                    </div>
                    <div class="widget">
                        <h4>Categories</h4>
                        <ul>
                            @foreach (var category in Model.SidebarCategories)
                            {
                                <li><i class="@category.IconName"></i><a href="@category.CategoryUrl"><span>  @category.Name (@category.ProjectsCount)</span></a></li>
                            }
                        </ul>
                    </div>
                    <div class="widget">
                        <h4>Recent projects</h4>
                        <ul class="recent-posts">
                            <li>
                                <a href="#"><img src="~/img/dummies/post-50.jpg" alt="" /> Lorem ipsum dolor sit amet munere commodo ut nam</a>
                                <div class="clear">
                                </div>
                                <span class="date"><i class="icon-calendar"></i> 6 March, 2013</span>
                                <span class="comment"><i class="icon-comment"></i> 4 Comments</span>
                            </li>
                            <li>
                                <a href="#"><img src="~/img/dummies/post-50.jpg" alt="" /> Sea nostrum omittantur ne mea malis nominavi insolens</a>
                                <div class="clear">
                                </div>
                                <span class="date"><i class="icon-calendar"></i> 6 March, 2013</span>
                                <span class="comment"><i class="icon-comment"></i> 2 Comments</span>
                            </li>
                            <li>
                                <a href="#"><img src="~/img/dummies/post-50.jpg" alt="" /> Eius graece recusabo no pri odio tale quo id, mea at saepe</a>
                                <div class="clear">
                                </div>
                                <span class="date"><i class="icon-calendar"></i> 4 March, 2013</span>
                                <span class="comment"><i class="icon-comment"></i> 12 Comments</span>
                            </li>
                            <li>
                                <a href="#"><img src="~/img/dummies/post-50.jpg" alt="" /> Malorum deserunt at nec usu ad graeco elaboraret at rebum</a>
                                <div class="clear">
                                </div>
                                <span class="date"><i class="icon-calendar"></i> 3 March, 2013</span>
                                <span class="comment"><i class="icon-comment"></i> 3 Comments</span>
                            </li>
                        </ul>
                    </div>
                    <div class="widget">
                        <h4>Tags</h4>
                        <ul class="tags">
                            <li><a href="#">Tutorial</a></li>
                            <li><a href="#">Tricks</a></li>
                            <li><a href="#">Design</a></li>
                            <li><a href="#">Trends</a></li>
                            <li><a href="#">Online</a></li>
                        </ul>
                    </div>
                </aside>
            </div>
            <div class="span8">
                @foreach (var project in Model.Projects)
                {
                <article class="blog-post">
                    <div class="post-image">
                        <a asp-controller="Projects" asp-action="ById" asp-route-id="@project.Id"><img src=@project.ImageUrl alt="" /></a>
                    </div>
                    <div class="post-heading">
                        <h3><a asp-controller="Projects" asp-action="ById" asp-route-id="@project.Id">@project.Title</a></h3>
                    </div>
                    @if (project.ProjectStatus.ToString() == "InProgress")
                    {
                        <div class="progress progress-striped active">
                            <div class="bar" style="width: @project.Progress%;"></div>
                        </div>
                    }
                    else
                    {
                        <div class="progress progress-striped">
                            <div class="bar" style="width: 100%;"></div>
                        </div>
                    }
                    <div class="row">
                        <div class="span3">
                            <div class="post-icon">
                                <i class="icon-bg-dark icon-circled icon-file icon-3x active"></i>
                            </div>
                            <ul class="post-meta">
                                <li class="first"><i class="fas fa-user"></i><span><a @*To do: Add link to user profile here*@ href="#">@project.UserUsername</a></span></li>
                                <li class="first"><i class="fas fa-calendar-alt"></i><span>@project.CreatedOn.ToShortDateString()</span></li>
                                <li><i class="fas fa-comments"></i><span>@project.CommentsCount comments</span></li>
                                @if (project.ProjectStatus.ToString() == "InProgress")
                                {
                                    <li class="first"><i class="fas fa-tasks"></i><span>@project.Progress% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
                                }
                                else
                                {
                                    <li class="first"><i class="fas fa-tasks"></i><span>@project.ProjectStatus</span></li>
                                }
                                <li class="first"><i class="fas fa-star"></i><span>@project.Rating</span></li>
                            </ul>
                            <div class="clear"></div>
                        </div>
                        <div class="span5">
                            <p>
                                @project.Summary
                            </p>
                            <a asp-controller="Projects" asp-action="ById" asp-route-id="@project.Id" class="btn btn-color btn-rounded">Read more</a>
                        </div>
                    </div>
                </article>
                }
            </div>
        </div>
    </div>
</section>
